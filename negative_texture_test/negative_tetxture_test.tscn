[gd_scene load_steps=7 format=3 uid="uid://c1i40lfpclo16"]

[ext_resource type="Shader" uid="uid://b352756gcbq38" path="res://negative_texture_test/shaders/negative_tetxture_test.gdshader" id="1_k28s6"]
[ext_resource type="Script" uid="uid://p6cc53bup0u1" path="res://negative_texture_test/negative_tetxture_test.gd" id="1_oh8ix"]
[ext_resource type="Shader" uid="uid://brl2mbey3n71k" path="res://negative_texture_test/shaders/negative_tetxture_test_reading.gdshader" id="2_kf6p3"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_kf6p3"]
shader = ExtResource("1_k28s6")

[sub_resource type="ViewportTexture" id="ViewportTexture_oh8ix"]
viewport_path = NodePath("SubViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oh8ix"]
shader = ExtResource("2_kf6p3")
shader_parameter/u_negative_texture = SubResource("ViewportTexture_oh8ix")

[node name="NegativeTetxtureTest" type="Node2D" node_paths=PackedStringArray("rect", "vp")]
script = ExtResource("1_oh8ix")
rect = NodePath("ColorRect")
vp = NodePath("SubViewport")

[node name="SubViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
handle_input_locally = false
snap_2d_transforms_to_pixel = true
snap_2d_vertices_to_pixel = true
canvas_item_default_texture_filter = 0
size = Vector2i(240, 240)
render_target_update_mode = 4

[node name="NegativeTextureTest" type="ColorRect" parent="SubViewport"]
material = SubResource("ShaderMaterial_kf6p3")
custom_minimum_size = Vector2(240, 240)
offset_right = 40.0
offset_bottom = 40.0

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_oh8ix")
custom_minimum_size = Vector2(240, 240)
offset_right = 40.0
offset_bottom = 40.0
